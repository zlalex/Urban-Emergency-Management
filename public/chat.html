<!DOCTYPE html>
<html lang="cn">

<head>
	<meta charset="UTF-8">
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		/*chrome下能隐藏滚动条*/
		::-webkit-scrollbar {
			display: none;
		}

		@keyframes text {
			0% {
				top: 50px;
				opacity: 0;
			}

			100% {
				top: 0;
				opacity: 1;
			}
		}

		body {
			background-color: #e1e1e1;
		}

		.container {
			position: relative;
			height: 700px;
			width: 400px;
			margin: 50px auto;
			background-color: #f0f0f0;
			border-radius: 6px;
			overflow: hidden;
		}

		.main {
			overflow: auto;
			border-bottom: 60px solid #fff;
			padding: 20px 10px;
			width: 100%;
			height: 100%;
		}

		.main:after {
			display: block;
			content: "";
			background-color: transparent;
			width: 100%;
			height: 50px;
		}

		.lineBox {
			overflow: hidden;
			min-height: 40px;
			clear: both;
			position: relative;

		}

		.imgWhite {
			position: absolute;

			left: 10px;
			width: 40px;
			height: 40px;
			border-radius: 50%;
		}

		.imgBlue {
			position: absolute;
			right: 10px;
			width: 40px;
			height: 40px;
			border-radius: 50%;
		}

		.textWhite {
			min-height: 40px;
			margin-left: 60px;
			margin-right: 10px;
			margin-bottom: 15px;
			padding: 10px 10px;
			display: inline-block;
			position: relative;
			border-radius: 6px;
			background-color: #ffffff;
			box-shadow: 0 5px 15px 0 rgba(0, 0, 0, 0.05);
		}

		.textWhite:before {
			display: block;
			content: "";
			width: 0;
			height: 0;
			position: absolute;
			left: -6px;
			top: 14px;
			border-top: solid 6px transparent;
			border-right: 6px solid #fff;
			border-bottom: solid 6px transparent;
		}

		.textBlue {
			min-height: 40px;
			position: relative;
			float: right;
			margin-left: 10px;
			margin-right: 60px;
			margin-bottom: 15px;
			padding: 10px 10px;
			display: inline-block;
			border-radius: 6px;
			background-color: #2970ff;
			box-shadow: 0 5px 15px 0 rgba(41, 75, 255, 0.3);
			color: #fff;
		}

		.textBlue:before {
			display: block;
			content: "";
			width: 0;
			height: 0;
			position: absolute;
			right: -6px;
			top: 14px;
			border-top: solid 6px transparent;
			border-left: 6px solid #2970ff;
			border-bottom: solid 6px transparent;
		}

		.inputBox {
			position: absolute;
			bottom: 0;
			left: 0;
			height: 60px;
			line-height: 60px;
			width: 100%;
			background-color: #ffffff;

		}

		.img1 {
			margin-left: 10px;
			margin-top: -3px;
			display: inline-block;
			vertical-align: middle;
			width: 40px;
			height: 40px;
			box-sizing: border-box;
			background-color: #fff;
			border-radius: 6px;
		}

		.textBox {
			display: inline-block;
			line-height: 60px;
			right: 100px;
			left: 60px;
			position: absolute;
		}

		#text {
			display: inline-block;
			font-size: 16px;
			padding: 0 0 0 10px;
			width: 100%;
			height: 40px;
			border-radius: 6px;
			border: 1px solid #e1e1e1;
		}

		#btn {
			cursor: pointer;
			font-size: 16px;
			margin: 10px;
			display: inline-block;
			vertical-align: middle;
			float: right;
			height: 40px;
			box-sizing: border-box;
			width: 80px;
			border-radius: 6px;
			border: 1px solid #e1e1e1;
			background-color: #fff;
			outline: none;
		}

		#btn:hover {
			color: #fff;
			background-color: #2970ff;
		}

		#btn:active {
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.2) inset;
			background-color: #3668ff;
		}
	</style>
	<script>
		window.onload = function () {
			var img1 = document.getElementsByClassName("img1");
			var imgWhite = document.getElementsByClassName("imgWhite");
			var imgBlue = document.getElementsByClassName("imgBlue");
			var textM = document.getElementsByClassName("textM");
			var textWhite = document.getElementsByClassName("textWhite");
			var textBlue = document.getElementsByClassName("textBlue");
			var text = document.getElementById("text");
			var btn = document.getElementById("btn");
			var lineBox = document.getElementsByClassName("lineBox");
			var main = document.getElementsByClassName("main");

			var onOff = true;

			main[0].scrollTop = main[0].scrollHeight;

			img1[0].onclick = function () {
				if (onOff === true) {
					this.src = "img-plice.jpg";
					onOff = false
				} else {
					this.src = "img-operation.jpg";
					onOff = true
				}
			};

			btn.onclick = function () {

				if (onOff === true) {
					main[0].innerHTML += "<div class=\"lineBox\">" + "<img class=\"imgWhite\">" + "<p class=\"textM textWhite\">" + "</p>" + "</div>";
					imgWhite[imgWhite.length - 1].src = img1[0].src;
					textWhite[textWhite.length - 1].innerHTML = text.value;
				} else {
					main[0].innerHTML += "<div class=\"lineBox\">" + "<img class=\"imgBlue\">" + "<p class=\"textM textBlue\">" + "</p>" + "</div>";
					imgBlue[imgBlue.length - 1].src = img1[0].src;
					textBlue[textBlue.length - 1].innerHTML = text.value;
				}

				for (var i = 0;i < textM.length;i++) {
					textM[i].style.animation = "";
					textM[i].style.animationFillMode = "";
				}

				textM[textM.length - 1].style.animation = "text 0.3s";
				textM[textM.length - 1].style.animationFillMode = "forwards";
				text.value = "";

				main[0].scrollTop = main[0].scrollHeight;
			};

			document.onkeyup = function (e) {
				if (window.event)
					e = window.event;
				var code = e.charCode || e.keyCode;
				if (code === 13) {
					btn.onclick();
				}
			}
		}
	</script>
</head>

<body>
	<div class="container">
		<div class="main">
			<!-- 发信人 -->
			<div class="lineBox">
				<img src="img-plice.jpg" alt="" class="imgBlue">
				<p class="textM textBlue">
					2020年3月2日10时21分许接110报警，合庆地区周祝公路琥珀路口，发生罐式货车侧翻，现场发现天然气泄漏，未发现人员伤亡。根据《上海市处置危险化学品事故应急预案》，认定本次事故为一般事故，立即启动Ⅳ级响应。
				</p>
			</div>
			<!-- 接收人 -->
			<div class="lineBox">
				<img src="img-operation.jpg" alt="" class="imgWhite">
				<p class="textM textWhite">
					现将本次事故处置相关各协同单位任务通知如下：
				</p>
			</div>
		</div>
		<div class="inputBox">
			<img src="img-operation.jpg" alt="" class="img1">
			<div class="textBox">
				<input type="text" id="text">
			</div>
			<input type="button" value="发送" id="btn">
		</div>
	</div>
</body>

</html>